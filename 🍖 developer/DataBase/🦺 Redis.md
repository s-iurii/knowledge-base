
отличный материал:
https://habr.com/ru/companies/wunderfund/articles/685894/

# Aлгоритмов кэширования

### **1. No eviction (по умолчанию)**

- **Описание**: Данные не удаляются автоматически. Если кэш заполнен, любые новые записи приведут к ошибке `OOM command not allowed when used memory`.
- **Подходит для**: Сценариев, где важно, чтобы данные никогда не удалялись из кэша.
- **Примечание**: Этот режим можно использовать только при наличии строгого контроля за объёмом данных.

---

### **2. Allkeys-LRU**

- **Описание**: Удаляет наименее недавно используемые (Least Recently Used) ключи из всех данных.
- **Подходит для**: Классического сценария кэширования, где часто используемые данные остаются в кэше.
- **Пример использования**: Кэш для веб-страниц, часто запрашиваемых пользователями.

---

### **3. Allkeys-Random**

- **Описание**: Удаляет случайные ключи из всех данных.
- **Подходит для**: Простых сценариев или тестов, когда нет явной локальности доступа.
- **Пример использования**: Для временных тестов, где распределение запросов неизвестно.

---

### **4. Volatile-LRU**

- **Описание**: Удаляет наименее недавно используемые ключи только из тех, у которых установлено время жизни (`TTL`).
- **Подходит для**: Данных с установленным временем жизни, например, временных сессий пользователей.
- **Пример использования**: Кэш для аутентификационных токенов.

---

### **5. Volatile-Random**

- **Описание**: Удаляет случайные ключи, у которых установлено время жизни (`TTL`).
- **Подходит для**: Сценариев с временными данными, где точность выбора удаляемого ключа не критична.
- **Пример использования**: Кэш временных метрик.

---

### **6. Volatile-TTL**

- **Описание**: Удаляет ключи с самым близким истечением времени жизни (`TTL`).
- **Подходит для**: Сценариев, где важно удалить данные, которые вот-вот станут невалидными.
- **Пример использования**: Кэш данных с динамически изменяемым временем жизни.

---

### **7. Least Frequently Used (LFU)**

- **Описание**: Удаляет наименее часто используемые ключи.
- **Подходит для**: Сценариев, где данные с более высокой частотой доступа имеют приоритет.
- **Пример использования**: Кэш API-запросов, где популярные запросы обрабатываются чаще.
- **Дополнительно**: Redis использует приближенную версию LFU с учётом веса и вероятности.

---

### Как выбрать режим?

Режим работы eviction задаётся параметром конфигурации **`maxmemory-policy`**. Чтобы его установить, добавьте в файл `redis.conf` или выполните команду в Redis CLI:

