
https://habr.com/ru/articles/853652/

# Kafka. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Producer & Consumer
–ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∏—Ö–∞–∏–ª, —è —è–≤–ª—è—é—Å—å –§–∏–Ω–¢–µ—Ö —Å–∏—Å—Ç–µ–º–Ω—ã–º –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º, –∏—Å–ø–æ–ª–Ω—è—é—â–∏–º —Ä–æ–ª—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞ –Ω–∞¬†–ø—Ä–æ–µ–∫—Ç–∞—Ö. –ò —Å–µ–≥–æ–¥–Ω—è —è —Ö–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –ø–æ¬†Kafka, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è¬†–æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑¬†—Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã. –í¬†–º–∞—Ç–µ—Ä–∏–∞–ª–µ –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è –æ—Ç—Ä–∞–∑–∏—Ç—å —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –ø–æ¬†Kafka, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω—ã –Ω–∞–≥–ª—è–¥–Ω—ã–º–∏ –∫–µ–π—Å–∞–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ú–∞—Ç–µ—Ä–∏–∞–ª –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω—ã–º –∫–∞–∫¬†–¥–ª—è¬†–Ω–∞—á–∏–Ω–∞—é—â–∏—Ö, —Ç–∞–∫ –∏ –¥–ª—è¬†–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.¬†–ñ–µ–ª–∞—é –ø—Ä–∏—è—Ç–Ω–æ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—èü§ì

**–ü–ª–∞–Ω —Å—Ç–∞—Ç—å–∏ –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π:**

1. –°–Ω–∞—á–∞–ª–∞ –ø–æ–≤—Ç–æ—Ä–∏–º –±–∞–∑—É –∏ –≤—Å–ø–æ–º–Ω–∏–º —á—Ç–æ¬†—Ç–∞–∫–æ–µ Kafka (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è¬†–Ω–∞—á–∏–Ω–∞—é—â–∏—Ö) [[1](https://habr.com/ru/articles/853652/#1)]  
    
    1. –ß—Ç–æ¬†–≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ Kafka [[1.1](https://habr.com/ru/articles/853652/#1)]
        
    2. –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Kafka [[1.2](https://habr.com/ru/articles/853652/#12)]
        
    3. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Kafka [[1.3](https://habr.com/ru/articles/853652/#13)]
        
    4. –°–æ–æ–±—â–µ–Ω–∏–µ –≤¬†Kafka (event) [[1.4](https://habr.com/ru/articles/853652/#14)]
        
2. –î–∞–ª–µ–µ –æ–±—Å—É–¥–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ö–æ–Ω—Å—é–º–µ—Ä–∞ –∏ –ü—Ä–æ–¥—é—Å–µ—Ä–∞ (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è¬†–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö) [[2](https://habr.com/ru/articles/853652/#2)]
    
    1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë—Ä–æ–∫–µ—Ä–∞ [[2.1](https://habr.com/ru/articles/853652/#21)]
        
    2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–æ–¥—é—Å–µ—Ä–∞ [[2.2](https://habr.com/ru/articles/853652/#22)]
        
    3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–æ–Ω—Å—é–º–µ—Ä–∞ [[2.3](https://habr.com/ru/articles/853652/#23)]
        
    4. –ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ö–æ–Ω—Å—é–º–µ—Ä‚Äë–≥—Ä—É–ø–ø—ã [[2.4](https://habr.com/ru/articles/853652/#24)]
        
    5. –ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ü–∞—Ä—Ç–∏—Ü–∏–∏ [[2.5](https://habr.com/ru/articles/853652/#25)]
        
3. –ü–æ—Å–ª–µ —á–µ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å¬†Kafka (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è¬†–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö) [[3](https://habr.com/ru/articles/853652/#3)]
    
    1. 3¬†—Å–µ–º–∞–Ω—Ç–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö [[3.1](https://habr.com/ru/articles/853652/#31)]
        
    2. –ö–∞–∫¬†—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Exactly once [[3.2](https://habr.com/ru/articles/853652/#32)]
        
4. –ò –ø–æ–¥¬†–∫–æ–Ω–µ—Ü —Ä–∞–∑–±–µ—Ä–µ–º –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –∫–µ–π—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Kafka –≤¬†–±–æ–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è¬†–≤—Å–µ—Ö) [[4](https://habr.com/ru/articles/853652/#4)]
    
    1. –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö¬†‚Äî —Å–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤¬†—Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ [[4.1](https://habr.com/ru/articles/853652/#41)]
        
    2. –ö—Ä–æ—Å—Å‚Äë—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏‚Äë–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ ‚Äë–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏ [[4.2](https://habr.com/ru/articles/853652/#42)]
        
    3. –û—Å–Ω–æ–≤–∞ –¥–ª—è¬†—à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö [[4.3](https://habr.com/ru/articles/853652/#43)]
        
    4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ [[4.4](https://habr.com/ru/articles/853652/#44)]
        
    5. –ö–æ–≥–¥–∞ –Ω–µ¬†—Å—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å Kafka [[4.5](https://habr.com/ru/articles/853652/#45)]
        

## ‚Ññ1 –ß–¢–û –¢–ê–ö–û–ï KAFKA

**Apache Kafka**¬†‚Äî –æ–ø–µ–Ω—Å–æ—Ä—Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–∫–µ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –ø–æ¬†–º–æ–¥–µ–ª–∏ pub/sub  
–Ø –ø–æ–ø—ã—Ç–∞–ª—Å—è –ø–æ–¥–æ–±—Ä–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –µ–º–∫–æ–µ –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è¬†–¥–∞–Ω–Ω–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –ò —á—Ç–æ–±—ã —Å–ª–æ–≤–∞, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –≤¬†–¥–µ—Ñ–∏–Ω–∏—Ü–∏—é –Ω–µ¬†–≤—ã–≥–ª—è–¥–µ–ª –∫–∞–∫¬†–ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä –∫—Ä–∞—Å–∏–≤—ã—Ö —Å–ª–æ–≥–∞–Ω–æ–≤, –ø—Ä–µ–¥–ª–∞–≥–∞—é –¥–µ—Ç–∞–ª—å–Ω–µ–µ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞¬†—á–∞—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

![–ß—Ç–æ —Ç–∞–∫–æ–µ –ö–∞—Ñ–∫–∞?](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0c9/95f/69a/0c995f69a47bc0c6f94caee63819f7d4.png "–ß—Ç–æ —Ç–∞–∫–æ–µ –ö–∞—Ñ–∫–∞?")

–ß—Ç–æ¬†—Ç–∞–∫–æ–µ –ö–∞—Ñ–∫–∞?

–ù–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ¬†—Ç–æ–º, –∫–æ–≥–¥–∞ –∏ –¥–ª—è¬†—á–µ–≥–æ¬†–±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ Kafka:

1. Apache Kafka¬†–±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤¬†–∫–æ–º–ø–∞–Ω–∏–∏ LinkedIn –≤ 2011¬†–≥–æ–¥—É –∏ —Å¬†—Ç–µ—Ö –ø–æ—Ä —Å—Ç–∞–ª–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –¥–ª—è¬†–æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤¬†—Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    
2. –î–ª—è¬†–±–æ–ª—å—à–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏ —Å–∫–∞–∂—É, —á—Ç–æ¬†–≤¬†LinkedIn¬†–±—ã–ª —Å–ª–µ–¥—É—é—â–∏–π –∫–µ–π—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö¬†‚Äî —ç—Ç–æ¬†–±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤¬†—Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤¬†—Ä–∞–º–∫–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –°–∏—Å—Ç–µ–º–æ–π‚Äë–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–º –∏ C–∏—Å—Ç–µ–º–æ–π‚Äë–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º –≤¬†—Ü–µ–ª—è—Ö –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –°–∏—Å—Ç–µ–º—ã‚Äë–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è.
    
3. Kafka –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞¬†—è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è¬†**Java**¬†–∏¬†**Scala**.
    
4. –ù–æ¬†–ø—Ä–∏ —ç—Ç–æ–º –¥–ª—è¬†–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å¬†Kafka —Å—É—â–µ—Å—Ç–≤—É–µ—Ç Kafka API¬†‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑¬†–∫–æ—Ä–æ–±–∫–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è¬†–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ Kafka –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–π –±—Ä–æ–∫–µ—Ä –Ω–∞¬†–ø—Ä–æ–µ–∫—Ç–µ —Å¬†–ø–æ—á—Ç–∏ –ª—é–±—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º —Å—Ç–µ–∫–æ–º.
    

## –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ö–∞—Ñ–∫–∏

–ö–∞–∫¬†–±—ã–ª–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–æ –≤¬†–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏, Kafka —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–∏—Å—Ç–µ–º–∞, –∞¬†–Ω–µ¬†–ø—Ä–æ—Å—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–π –±—Ä–æ–∫–µ—Ä –∏–ª–∏¬†–æ—á–µ—Ä–µ–¥—å. –ü–æ—ç—Ç–æ–º—É –¥–∞–ª–µ–µ –æ–±–æ–∑–Ω–∞—á–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Kafka. –ò –Ω–∞—á–Ω–µ–º –º—ã —Å¬†Zookeeper.

- **Zookeeper**¬†‚Äî —ç—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤¬†Apache Kafka –¥–ª—è¬†—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö. –•–æ—Ç—å –¥–∞–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ¬†–Ω–µ–º –≥–æ–≤–æ—Ä–∏—Ç—Å—è –∏ –Ω–µ¬†–±—É–¥–µ—Ç, –Ω–æ¬†–ó—É–∫–∏–ø–µ—Ä —Å–∞–º –ø–æ¬†—Å–µ–±–µ —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –ö–∞—Ñ–∫–∏, —Ç–∞–∫ –∫–∞–∫¬†–µ—Å–ª–∏ –æ–Ω —É–ø–∞–¥–µ—Ç, —Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ–æ–±—â–µ –≤—Å—è –ö–∞—Ñ–∫–∞. –ö¬†—Å—á–∞—Å—Ç—å—é –¥–∞–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –Ω–µ¬†–æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫¬†–¥—Ä—É–≥–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    
- **–ë—Ä–æ–∫–µ—Ä—ã**¬†‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä—ã –≤¬†–∫–ª–∞—Å—Ç–µ—Ä–µ Kafka, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞¬†–∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–∞–∂–¥—ã–π –±—Ä–æ–∫–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç¬†–ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∫–æ–Ω—Å—é–º–µ—Ä–∏–∑–º. –ë—Ä–æ–∫–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
    
- **–¢–æ–ø–∏–∫–∏**¬†‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤¬†Kafka, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–µ —Å–æ–±–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏¬†–∫–∞–Ω–∞–ª—ã –¥–ª—è¬†–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–µ –≤¬†Kafka, –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤¬†–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ç–æ–ø–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç¬†–±—ã—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω –æ–¥–Ω–∏–º –∏–ª–∏¬†–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏.
    
- **–ü–∞—Ä—Ç–∏—Ü–∏–∏**¬†‚Äî —ç—Ç–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–æ–ø–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ü–∞—Ä—Ç–∏—Ü–∏–∏ –∫–∞–∫¬†—Ä–∞–∑ –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ—á–µ—Ä–µ–¥–µ–π –≤¬†–ö–∞—Ñ–∫–µ, —Ç–∞–∫ –∫–∞–∫¬†–≤¬†–Ω–∏—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–∞–∂–¥–æ–º—É —Ç–æ–ø–∏–∫—É –º–æ–∂–µ—Ç¬†–±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ä–∏—Ü–∏–π, —á—Ç–æ¬†—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
    
- **–û—Ñ—Ñ—Å–µ—Ç**¬†‚Äî —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–Ω–∞–ª–æ–≥ –∏–Ω–¥–µ–∫—Å–∞ –≤¬†–º–∞—Å—Å–∏–≤–µ), –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º—ã–π –∫–∞–∂–¥–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –≤¬†–ø–∞—Ä—Ç–∏—Ü–∏–∏. –û–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞¬†–ø–æ–∑–∏—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è¬†–±—ã–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã.
    
- **–ü—Ä–æ–¥—é—Å–µ—Ä**¬†‚Äî —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†—Ç–æ–ø–∏–∫–∏ Kafka.
    
- –ò –Ω–∞–∫–æ–Ω–µ—Ü¬†**–ö–æ–Ω—Å—é–º–µ—Ä**¬†‚Äî —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑¬†—Ç–æ–ø–∏–∫–æ–≤ Kafka. –ö–æ–Ω—Å—å—é–º–µ—Ä—ã –º–æ–≥—É—Ç¬†–±—ã—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤¬†–≥—Ä—É–ø–ø—ã, —á—Ç–æ¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º —Å–æ–≤–º–µ—Å—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏. –í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ¬†—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –æ—Ñ—Ñ—Å–µ—Ç—ã –∑–∞–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ –∑–∞¬†—Ü–µ–ª–æ–π –∫–æ–Ω—Å—é–º–µ—Ä‚Äë–≥—Ä—É–ø–ø–æ–π, –∞¬†–Ω–µ¬†–æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–æ–Ω—Å—é–º–µ—Ä, —Ç–µ–º —Å–∞–º—ã–º –Ω–µ¬†–ø–æ–∑–≤–æ–ª—è—è –¥–≤—É–º –∫–æ–Ω—Å—é–º–µ—Ä–∞–º –∏–∑¬†–æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã —Å—á–∏—Ç–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ¬†–∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã.
    

![–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ö–∞—Ñ–∫–∏](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5eb/de5/211/5ebde5211064c8d588fe105a29c3c470.png "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ö–∞—Ñ–∫–∏")

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ö–∞—Ñ–∫–∏

## –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Kafka

**–î–∞–ª–µ–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞¬†—Ç–æ, –∫–∞–∫¬†–≤¬†–ö–∞—Ñ–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è.  
**–í¬†–∫–∞—á–µ—Å—Ç–≤–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Apache Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–≤–µ—Ä—Ö TCP. –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ü—Ä–æ–¥—é—Å–µ—Ä–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –≤¬†–±–∏–Ω–∞—Ä–Ω—ã–π –≤–∏–¥, –∞¬†–¥–∞–ª–µ–µ —É–∂–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ö–æ–Ω—Å—é–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤¬†–∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–µ—Ä–µ–∑ –¥–µ—Å–∏—Ä–µ–∞–ª–∏–∑–∞—Ç–æ—Ä.

**–ê¬†–∫–∞–∫–∏–µ¬†–∂–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ö–∞—Ñ–∫—É?  
**–ß–µ—Ä–µ–∑ –ö–∞—Ñ–∫—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª—é–±–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –Ω–æ¬†–¥–µ–ª–∞—Ç—å —ç—Ç–æ–≥–æ –Ω–µ¬†—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ¬†pdf/mp3/jpeg —Ñ–∞–π–ª–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ json —Å—Å—ã–ª–∫–∏ –Ω–∞¬†–∏—Ö –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤¬†—É—Å–ª–æ–≤–Ω–æ–º S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –¢–∞–∫¬†–∂–µ —Å—Ç–æ–∏—Ç –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ¬†–ö–∞—Ñ–∫–∞ –Ω–µ¬†—Ä–µ–∑–∏–Ω–æ–≤–∞—è, –ø–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –æ–±—ä–µ–º 1¬†—Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†–∏–¥–µ–∞–ª–µ –Ω–µ¬†–¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 32–∫–±.

![–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Kafka](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b91/441/b71/b91441b7188129043bbc4e8f117f25ff.png "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Kafka")

–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–Ω–∏—è Kafka

### –°–æ–æ–±—â–µ–Ω–∏–µ –≤ Kafka (event)

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ¬†–∏–∑¬†—Å–µ–±—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤¬†–ö–∞—Ñ–∫–∞.  
–í–æ–æ–±—â–µ –≤¬†—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å¬†–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π¬†[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](https://kafka.apache.org/documentation/)¬†–∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤¬†–ö–∞—Ñ–∫–µ –Ω–∞¬†—Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ–º. –ò —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É¬†–¥–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —Å–ª–µ–¥—É—é—â–∞—è: –∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–π–º—Å—Ç–µ–º–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫.

–†–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ:

- **Key**¬†‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è¬†—Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ¬†—Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∏—Ö –ø–æ—Ä–æ–¥–∏–ª–∞, –ø–æ—Å–∫–æ–ª—å–∫—É –æ—Ç¬†—ç—Ç–æ–≥–æ –∑–∞–≤–∏—Å–∏—Ç —Å–ø–æ—Å–æ–± –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Å—é–º–µ—Ä–æ–º. –ö¬†–ø—Ä–∏–º–µ—Ä—É —É¬†–Ω–∞—Å –µ—Å—Ç—å –¥–æ—Ö–æ–¥–Ω—ã–π –∏ —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏ –Ω–∞–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤¬†–∑–Ω–∞—á–µ–Ω–∏–∏ —É¬†–Ω–∏—Ö —Ä–∞–∑–Ω—ã–π. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å¬†–ø–æ–º–æ—â—å—é –∫–ª—é—á–∞ –º—ã –∑–∞—Ä–∞–Ω–µ–µ –º–æ–∂–µ–º —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Å—é–º–µ—Ä—É –∫–∞–∫¬†–µ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π json.
    
- **Value**¬†‚Äî —Å–º—ã—Å–ª–æ–≤–∞—è —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ¬†—Å—É—Ç–∏ —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫¬†—Ç–∞–∫–æ–≤–æ–µ. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤¬†–ö–∞—Ñ–∫—É. –ò —É–∂–µ —Ç–æ–ª—å–∫–æ —Å¬†–Ω–∏–º –æ–¥–Ω–∏–º –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –Ω–µ¬†–æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞¬†–¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã. –í¬†–∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –ø—Ä–∏–≤—ã—á–Ω—ã–π json —Ñ–æ—Ä–º–∞—Ç.
    
- **TimeStamp**¬†‚Äî –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è.
    
- **Headers**¬†‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏. –û–Ω–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è¬†—É–∫–∞–∑–∞–Ω–∏—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ç–∞–∫–æ–π –∫–∞–∫¬†traceId –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏¬†—Å—Å—ã–ª–∫–∏ –Ω–∞¬†–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ‚Äë–∏—Å—Ç–æ—á–Ω–∏–∫.
    

![–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka](https://habrastorage.org/r/w1560/getpro/habr/upload_files/bde/964/661/bde964661e414b0b12eba71992308337.png "–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka")

–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†Kafka

–û—Ç–¥–µ–ª—å–Ω–æ –æ—Ç–º–µ—á—É, —á—Ç–æ¬†—Å–æ–æ–±—â–µ–Ω–∏–µ –≤¬†–ö–∞—Ñ–∫–∞ –Ω–µ¬†—É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã—á–∏—Ç–∫–∏ –ö–æ–Ω—Å—é–º–µ—Ä–æ–º, –Ω–æ¬†–æ–Ω–æ –º–æ–∂–µ—Ç¬†–±—ã—Ç—å —É–¥–∞–ª–µ–Ω–æ –≤¬†—Å–ª–µ–¥—É—é—â–∏—Ö 2¬†—Å–ª—É—á–∞—è—Ö:  
**1)**¬†–ü–æ¬†–∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (TTL).  
**2)**¬†–ò–ª–∏¬†—Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç¬†–±—ã—Ç—å —É–¥–∞–ª–µ–Ω–æ –≤¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–æ–ø–∏–∫–∞ –¥–∞–Ω–Ω—ã–º–∏. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –≤¬†—Ç–æ–ø–∏–∫ –Ω–µ¬†–≤–ª–µ–∑–∞–µ—Ç –ø–æ¬†–æ–±—ä–µ–º—É –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–æ –¥–ª—è¬†—Ç–æ–≥–æ —á—Ç–æ–±—ã –æ–Ω–æ –≤—Å–µ‚Äë—Ç–∞–∫–∏ –≤–ª–µ–∑–ª–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ —Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

–ö–∞–∫¬†–º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å –≤—ã—à–µ–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Ä–æ–∂–¥–∞–µ—Ç —Ä–∏—Å–∫–∏ –Ω–µ¬†–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Å—é–º–µ—Ä–æ–º –≤¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –µ–≥–æ –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç—ã. –î–µ–ª–∞–µ–º –≤—ã–≤–æ–¥¬†‚Äî –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –≤¬†–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—Ä–æ–∫–µ—Ä–∞ –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–µ–ª –æ–±—ä–µ–º–∞ —Ç–æ–ø–∏–∫–∞ —Å¬†–∑–∞–ø–∞—Å–æ–º. –ê¬†–∫–∞–∫¬†—ç—Ç–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∫¬†—Ä–∞–∑ –¥–∞–ª–µ–µ.

---

## ‚Ññ2 –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ù–ê–°–¢–†–û–ï–ö –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë—Ä–æ–∫–µ—Ä–∞ Kafka

–î–∞–ª—å—à–µ –¥–∞–≤–∞–π—Ç–µ –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–∞–∑–±–µ—Ä–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è¬†–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–æ–ø–∏–∫–∞ –≤¬†–ö–∞—Ñ–∫–∞, –ø–æ–ø—É—Ç–Ω–æ —Å–º–æ—Ç—Ä—è –Ω–∞¬†–ø—Ä–∏–º–µ—Ä –∏—Ö –æ–∫–æ–ª–æ‚Äë—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π

- **default.replication.factor**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –¥–ª—è¬†–∫–∞–∂–¥–æ–≥–æ —Ç–æ–ø–∏–∫–∞ (–≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏). –î–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ¬†—Å—É—Ç–∏ –∑–∞–¥–∞–µ—Ç —Å—Ç–µ–ø–µ–Ω—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è¬†–≤–∞—à–µ–≥–æ —Ç–æ–ø–∏–∫–∞.
    
- **min.insync.replicas**¬†‚Äî –º–∏–Ω. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –≤¬†—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö –¥–ª—è¬†–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ü—Ä–æ–¥—é—Å–µ—Ä–æ–º. –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω—É–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –Ω–∞ 1¬†–º–µ–Ω—å—à–µ —á–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ (–º–æ–∂–Ω–æ –µ—â–µ –º–µ–Ω—å—à–µ –¥–µ–ª–∞—Ç—å –¥–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä), –∏–Ω–∞—á–µ –≤–∞—à –±—Ä–æ–∫–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫, —Å–ª–æ–≤–Ω–æ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –≤¬†–Ω–µ–º –Ω–∏–∫–∞–∫–æ–π –Ω–µ—Ç, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è —Ö–æ—Ç—è¬†–±—ã –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –ö–∞—Ñ–∫–∞ —É–∂–µ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è¬†–∑–∞–ø–∏—Å–∏¬†‚Äî –≤¬†—Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤–µ—Å—å —Ç–æ–ª–∫ –æ—Ç¬†—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ —Ç–µ—Ä—è–µ—Ç—Å—è.
    
- **message.max.bytes**¬†‚Äî –º–∞–∫—Å. —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è (–≤ –±–∞–π—Ç–∞—Ö)
    
- **num.partitions**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –ø–æ¬†—É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è¬†–Ω–æ–≤—ã—Ö —Ç–æ–ø–∏–∫–æ–≤.
    
- **retention.ms**¬†‚Äî —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†–ö–∞—Ñ–∫–∞ (TTL). –°–æ–æ–±—â–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–µ¬†–±–æ–ª—å—à–µ –¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–¥–∞–ª—è–µ—Ç—Å—è, –ø—Ä–∏—á–µ–º —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ¬†–∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∑–∞–¥–∞–µ—Ç—Å—è –≤¬†–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö.
    
- **retention.bytes**¬†‚Äî –º–∞–∫—Å. —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤¬†—Ç–æ–ø–∏–∫–µ. –°—É–º–º–∞—Ä–Ω—ã–π –≤–µ—Å –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤¬†—Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –Ω–µ¬†–º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ –ø—Ä–∏¬†–¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–Ω–æ –±—É–¥–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–æ, —Ç–æ —Å–∞–º–æ–µ —Ä–∞–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –∏–∑¬†—Ç–æ–ø–∏–∫–∞, —á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª–æ—Å—å –º–µ—Å—Ç–æ –¥–ª—è¬†–Ω–æ–≤–æ–≥–æ.
    

![–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka –±—Ä–æ–∫–µ—Ä–∞](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a63/036/33f/a6303633fd564d2884a2095e6cd32857.png "–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka –±—Ä–æ–∫–µ—Ä–∞")

–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è¬†–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kafka –±—Ä–æ–∫–µ—Ä–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞

–î–∞–ª–µ–µ –ø–µ—Ä–µ–π–¥–µ–º –∫¬†—Ä–∞–∑–±–æ—Ä—É –≤–∞–∂–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–¥—é—Å–µ—Ä–∞..

- **batch.size**¬†‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –≤¬†–±–∞–π—Ç–∞—Ö. –û–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞–∫–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—É–º–º–∞—Ä–Ω—ã–π –æ–±—ä–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤¬†—Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –±–∞—Ç—á–∞ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ü—Ä–æ–¥—é—Å–µ—Ä –≤¬†–ö–∞—Ñ–∫—É.
    
- **linger.ms**¬†‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–∞—á–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    
- **enable.idempotence (true)**¬†‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ü—Ä–æ–¥—é—Å–µ—Ä–∞ –≤¬†—Å—Ç–æ—Ä–æ–Ω—É –ö–∞—Ñ–∫–∞‚Äë–±—Ä–æ–∫–µ—Ä–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π. –¢–æ –µ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ¬†–ª–∏–±–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ,¬†–ª–∏–±–æ –Ω–µ¬†–±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤–æ–≤—Å–µ, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
    
- **max.in.flight.requests.per.connection**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç¬†–±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–æ¬†–ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç¬†–±—Ä–æ–∫–µ—Ä–∞. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ 1¬†–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ¬†—Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –ø–æ¬†–æ–¥–Ω–æ–º—É –∏ –≤¬†–ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–∏, —á—Ç–æ¬†–ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ—Ç–µ—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
    
- **retries**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†—Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ 0¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥—é—Å–µ—Ä—É –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –Ω–µ¬†—É–¥–∞–ª–∞—Å—å, —á—Ç–æ¬†—Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç¬†–±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è¬†–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.
    
- **acks (acknowledges)**¬†‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏. –û¬†–Ω–∏—Ö –¥–∞–ª–µ–µ –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ.
    

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ü—Ä–æ–¥—é—Å–µ—Ä–∞ –Ω–∞¬†Python

–°–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç

```

```

–ü—Ä–∏–≤–µ–¥—É –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –∞–∫—Å–æ–≤  
**0**¬†‚Äî –ü—Ä–æ–¥—é—Å–µ—Ä –Ω–µ¬†–∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç¬†–ë—Ä–æ–∫–µ—Ä–∞ –ö–∞—Ñ–∫–∏ –æ–±¬†—É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
**1**¬†‚Äî –ü—Ä–æ–¥—é—Å–µ—Ä –∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç¬†–ë—Ä–æ–∫–µ—Ä–∞ –ö–∞—Ñ–∫–∏ –æ–±¬†—É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –≤¬†–º–∞—Å—Ç–µ—Ä‚Äë–ø–∞—Ä—Ç–∏—Ü–∏.  
**-1**¬†(¬´all¬ª)¬†‚Äî –ü—Ä–æ–¥—é—Å–µ—Ä –∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç¬†–ë—Ä–æ–∫–µ—Ä–∞ –ö–∞—Ñ–∫–∏ –æ–±¬†—É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –≤–æ¬†–≤—Å–µ—Ö –ø–∞—Ä—Ç–∏—Ü–∏—è—Ö (–Ω–µ —Ç–æ–ª—å–∫–æ –≤¬†–º–∞—Å—Ç–µ—Ä, –Ω–æ¬†–∏ –≤¬†–µ–µ —Ñ–æ–ª–ª–æ–≤–µ—Ä–∞—Ö).

–ü–æ¬†—Å—É—Ç–∏ –∏–¥–µ—è —Ç—É—Ç —Å–ª–µ–¥—É—é—â–∞—è: –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∫–∞–∫¬†–º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –∏¬†–±—ã—Å—Ç—Ä–µ–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–µ¬†–æ–ø–∞—Å–∞—è—Å—å –∑–∞¬†–∏—Ö —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏, —Ç–æ –≤—ã–±–∏—Ä–∞–µ–º acks = 0. –ï—Å–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç –¥–ª—è¬†–Ω–∞—Å –≤¬†–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–æ –≤—ã–±–∏—Ä–∞–µ–º acks = -1.

![–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã acks](https://habrastorage.org/r/w1560/getpro/habr/upload_files/fbc/7e3/979/fbc7e39798fc6217e904c21ccad18354.png "–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã acks")

–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã acks

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫¬†–≤–∞–∂–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞. –ö–∞—Ñ–∫–∞ –∏—Å–ø–æ–≤–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø —É–º–Ω–æ–≥–æ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è, –∞¬†—ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ¬†—Å¬†–ö–æ–Ω—Å—é–º–µ—Ä–æ–º –Ω—É–∂–Ω–æ¬†–±—ã—Ç—å –ø—Ä–µ–¥–µ–ª—å–Ω–æ –±–¥–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏¬†–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

- **group.id**¬†‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
    
- **enable.auto.commit (false)**¬†‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏–π (offsets) –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º. –ü—Ä–∏¬†–∑–Ω–∞—á–µ–Ω–∏–∏ false –ö–æ–Ω—Å—é–º–µ—Ä –±—É–¥–µ—Ç –æ—Ç—Å—ã–ª–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±¬†—É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–∏ —Ç–æ–ª—å–∫–æ –≤¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å¬†–¥–∞–Ω–Ω—ã–º–∏.
    
- **auto.offset.reset**¬†‚Äî —Å¬†–∫–∞–∫–æ–≥–æ –æ—Ñ—Ñ—Å–µ—Ç–∞ –≤¬†—Ç–æ–ø–∏–∫–µ –Ω–∞—á–∏–Ω–∞—Ç—å —á–∏—Ç–∞—Ç—å, –µ—Å–ª–∏ –ö–æ–Ω—Å—é–º–µ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫¬†—Ç–æ–ø–∏–∫—É –≤–ø–µ—Ä–≤—ã–µ –∏–ª–∏¬†–µ—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ¬†–µ–≥–æ –Ω–∞—á–∞–ª—å–Ω–æ–º –æ—Ñ—Ñ—Å–µ—Ç–µ —á—Ç–µ–Ω–∏—è.
    
    - **earliest¬†‚Äî**¬†–Ω–∞—á–∏–Ω–∞–µ—Ç —á–∏—Ç–∞—Ç—å —Å¬†–ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†—Ç–æ–ø–∏–∫–µ. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ¬†–±—ã–ª–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –¥–æ¬†–º–æ–º–µ–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞ –ö–æ–Ω—Å—é–º–µ—Ä–∞.
        
    - **latest**¬†‚Äî –Ω–∞—á–∏–Ω–∞–µ—Ç —á–∏—Ç–∞—Ç—å —Å¬†–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤¬†—Ç–æ–ø–∏–∫–µ. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ¬†—É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è¬†—Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –≤–∞—à –Ω–æ–≤—ã–π –ö–æ–Ω—Å—é–º–µ—Ä –Ω–∞—á–∏–Ω–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å¬†—Ç–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ¬†–ø—Ä–∏—à–ª–∏ –≤¬†—Ç–æ–ø–∏–∫ —Å¬†–º–æ–º–µ–Ω—Ç–∞ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞.
        
    - **none**¬†‚Äî –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–º–µ—â–µ–Ω–∏–π, –ö–æ–Ω—Å—é–º–µ—Ä –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∂–µ, —Ç–∞–∫ –∫–∞–∫¬†—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤¬†–∫–æ–¥–µ. –ò –æ—Ç¬†–Ω–µ–≥–æ –µ—Å—Ç—å —Å–º—ã—Å–ª —Ç–æ–ª—å–∫–æ –≤¬†—Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –ö–æ–Ω—Å—é–º–µ—Ä–∞ –µ—Å—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç –Ω–µ–∫–∏–π ¬´—Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä¬ª –æ—Ñ—Ñ—Å–µ—Ç–∞ –¥–ª—è¬†—á—Ç–µ–Ω–∏—è.
        
- **isolation.level (read_commited)**¬†‚Äî –ø—Ä–∞–≤–∏–ª–æ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
    
- **read_commited**¬†‚Äî –ö–æ–Ω—Å—é–º–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç¬†–ü—Ä–æ–¥—é—Å–µ—Ä–∞, –ø–æ¬†–∫–æ—Ç–æ—Ä—ã–º –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (enable.idempotence = true —É¬†–ø—Ä–æ–¥—é—Å–µ—Ä–∞)
    
    - **read_uncommited (default)**¬†‚Äî —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏,
        

–ò –≤¬†–∫–æ–Ω—Ü–µ —Ä–∞–∑–±–µ—Ä–µ–º –≤–∞–∂–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **heartbeat.intervals.ms**¬†‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è. –í—Ä–µ–º–µ–Ω–Ω–æ–π —Ü–∏–∫–ª –≤¬†—Ä–∞–º–∫–∞—Ö, –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –¥–ª—è¬†Kafka —Å–≤–æ—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.
    
- **max.poll.interval.ms**¬†‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤¬†—Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–æ–Ω—Å—é–º–µ—Ä –º–æ–∂–µ—Ç –Ω–µ¬†–æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä Kafka –Ω–∞¬†–Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –ï—Å–ª–∏ –ö–æ–Ω—Å—é–º–µ—Ä –Ω–µ¬†–≤—ã–∑—ã–≤–∞–µ—Ç poll() –¥–æ–ª—å—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —Ç–æ –ö–æ–Ω—Å—é–º–µ—Ä –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º. –ü–∞—Ä–∞–º–µ—Ç—Ä –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–æ–ª—å—à–µ —á–µ–º –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–æ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.
    
- **session.timeout.ms**¬†‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –≤¬†—Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ö–æ–Ω—Å—é–º–µ—Ä –º–æ–∂–µ—Ç –Ω–µ¬†–ø–æ–¥–∞–≤–∞—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–∏ –∂–∏–∑–Ω–∏. –ï—Å–ª–∏ –∫–æ–Ω—Å—é–º–µ—Ä –Ω–µ¬†–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç heartbeat –≤¬†—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤¬†session.timeout.ms, –±—Ä–æ–∫–µ—Ä —Å—á–∏—Ç–∞–µ—Ç –µ–≥–æ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏¬†‚Äî –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–π —Å—Ä–µ–¥–∏ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –≤¬†–≥—Ä—É–ø–ø–µ.
    

–í¬†–∏–¥–µ–∞–ª–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

> heartbeat.intervals. < max.poll.interval.ms < session.timeout.ms

–¢–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç—å—Å—è —Å—Ü–µ–Ω–∞—Ä–∏–∏, –ø—Ä–∏¬†–∫–æ—Ç–æ—Ä—ã—Ö –ö–æ–Ω—Å—é–º–µ—Ä –ø–æ¬†–æ—à–∏–±–∫–µ –æ—Ç–∫–ª—é—á–∞—é—Ç –æ—Ç¬†–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è.

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—É –ø—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞ –Ω–∞¬†Python

–°–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç

```

```

## –ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ö–æ–Ω—Å—é–º–µ—Ä-–≥—Ä—É–ø–ø—ã

–¢–∞–∫–∂–µ –∑–¥–µ—Å—å —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å –µ—â–µ –æ–¥–Ω—É –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –ö–∞—Ñ–∫–∏. –ê¬†–∏–º–µ–Ω–Ω–æ, —á—Ç–æ¬†–∫–æ–Ω—Å—é–º–µ—Ä—ã –≤¬†—Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –∫–æ–Ω—Å—é–º–µ—Ä—ã –≥—Ä—É–ø–ø—ã –Ω–µ¬†–º–æ–≥—É—Ç —É–∫—Ä–∞—Å—Ç—å —É¬†–¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∑–∞—è–≤–∫–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ: –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Å—é–º–µ—Ä –ø—Ä–æ—á–∏—Ç–∞–ª –∏–ª–∏¬†–Ω–∞—á–∞–ª —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–æ –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Å—é–º–µ—Ä –∏–∑¬†—Ç–æ–π¬†–∂–µ –≥—Ä—É–ø–ø—ã –Ω–µ¬†–±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —É¬†–Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞‚Äë–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –∏–º–µ–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤. –¢–æ–≥–¥–∞ —Å–∞–º —Å–µ—Ä–≤–∏—Å¬†‚Äî —ç—Ç–æ –∫–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø–∞, –∞¬†–µ–≥–æ –Ω–æ–¥—ã¬†‚Äî —ç—Ç–æ –∫–æ–Ω—Å—é–º–µ—Ä—ã.

> **–í–∞–∂–Ω–æ**: –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—Ç—å id –≥—Ä—É–ø–ø—ã –ø—Ä–∏¬†–ø—Ä–æ–ø–∏—Å—ã–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Å—é–º–µ—Ä–∞. –ö–æ–Ω—Å—é–º–µ—Ä id¬†–∂–µ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã –¥–ª—è¬†–∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ö–∞—Ñ–∫–æ–π, –Ω–æ¬†–≤—Å–µ —Ä–∞–≤–Ω–æ –µ–≥–æ –ª—É—á—à–µ —Ç–æ–∂–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.
> 
> **–¢—É—Ç¬†–∂–µ –≤–∞–∂–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ**: –æ—Ñ—Ñ—Å–µ—Ç—ã –∑–∞–∫—Ä–µ–ø–ª–µ–Ω—ã –∑–∞¬†–∫–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø–æ–π, –∞¬†–Ω–µ¬†–∑–∞¬†–æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–æ–Ω—Å—é–º–µ—Ä–æ–º.

![–ö–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø–∞](https://habrastorage.org/r/w1560/getpro/habr/upload_files/423/6a7/4f1/4236a74f17a4f8820c64272bc70ba6f6.png "–ö–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø–∞")

–ö–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø–∞

## –ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏

–ï—â–µ –æ–¥–∏–Ω –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –∫–∞—Å–∞–µ–º–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–π. –•–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞¬†‚Äî –∫–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –≤¬†—Ä–∞–º–∫–∞—Ö 1¬†–∫–æ–Ω—Å—é–º–µ—Ä –≥—Ä—É–ø–ø—ã —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–∞—Ä—Ç–∏—Ü–∏–π. –ï—Å–ª–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –±–æ–ª—å—à–µ —á–µ–º –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤, —Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ¬†–ø–æ—Å–ø–µ–≤–∞—Ç—å –∑–∞¬†–æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π. –ù–∞—á–Ω–µ—Ç—Å—è –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ. –ò –ø—Ä–∏—á–µ–º —ç—Ç–æ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —Å–Ω–µ–∂–Ω–æ–≥–æ –∫–æ–º–∞: —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Ç–≤–æ–µ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤—Å–µ –±–æ–ª—å—à–µ –∏ –±–æ–ª—å—à–µ, –ø–æ–∫–∞ —ç—Ç–æ –Ω–µ¬†–ø—Ä–∏–≤–µ–¥–µ—Ç –∫¬†–ø–µ—Ä–µ–∑–∞—Ç–∏—Ä–∞–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏¬†–∏—Ö —É–¥–∞–ª–µ–Ω–∏—é –≤–≤–∏–¥—É TTL.  
–ê¬†–µ—Å–ª–∏ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤ –±–æ–ª—å—à–µ —á–µ–º –ø–∞—Ä—Ç–∏—Ü–∏–π, —Ç–æ¬†–ª–∏—à–Ω–∏–µ –∫–æ–Ω—Å—é–º–µ—Ä—ã –±—É–¥—É—Ç –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –±–µ–∑¬†—Ä–∞–±–æ—Ç—ã –∏ –Ω–∏—á–µ–≥–æ –Ω–µ¬†—á–∏—Ç–∞—Ç—å.

![–ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏](https://habrastorage.org/r/w1560/getpro/habr/upload_files/820/3ca/407/8203ca4077fd183bd94a829480b46d4c.png "–ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏")

–ö–æ–Ω—Å—é–º–µ—Ä—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏

---

## ‚Ññ3 BEST-PRACTICES –í –†–ê–ë–û–¢–ï –° KAFKA

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫¬†—Ä–∞–∑–±–æ—Ä—É –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤¬†—Ä–∞–±–æ—Ç–µ —Å¬†–ö–∞—Ñ–∫–æ–π. –ò –Ω–∞—á–Ω–µ–º —Å¬†—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### 3 —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 3¬†—Å–µ–º–∞–Ω—Ç–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö  
  
**At most once**¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –Ω–µ¬†–±–æ–ª–µ–µ 1¬†—Ä–∞–∑–∞.

- –†–∏—Å–∫: —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ¬†–±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –≤–æ–≤—Å–µ.
    
- –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –∫–æ–≥–¥–∞ —É¬†–Ω–∞—Å –¥–∞–Ω–Ω—ã–µ, —Ç–µ—Ä–ø–∏–º—ã–µ –∫¬†–ø–æ—Ç–µ—Ä–∏, –∏ –≤¬†–±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ. –ù–∞–ø—Ä–∏–º–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤¬†–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
    

**At least once**¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ö–æ—Ç—è¬†–±—ã 1¬†—Ä–∞–∑. –†–∏—Å–∫: —Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –¥—É–±–ª–µ–π.

- –†–∏—Å–∫: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø–∏—Å–µ–π
    
- –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –∫–æ–≥–¥–∞ —á—Ç–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –¥–ª—è¬†–ö–æ–Ω—Å—é–º–µ—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∞ –ü—Ä–æ–¥—é—Å–µ—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ö–æ–Ω—Å—é–º–µ—Ä—É –æ¬†—Ç–æ–º, —á—Ç–æ¬†–∫–∞–∫–æ–π‚Äë—Ç–æ —Ç–æ–≤–∞—Ä¬†–±—ã–ª –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞¬†—Å–∫–ª–∞–¥.
    

**Exactly once**¬†‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç—Ä–æ–≥–æ 1¬†—Ä–∞–∑.

- –†–∏—Å–∫: —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã
    
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –∫–æ–≥–¥–∞ —É¬†–Ω–∞—Å –¥–∞–Ω–Ω—ã–µ, –¥–ª—è¬†–∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—é –¥–æ—Å—Ç–∞–≤–∫–∏, –∏ –ø—Ä–∏¬†—ç—Ç–æ–º –∏—Ö —Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ¬†–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å¬†–ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.
    

### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Exactly once

–ù–æ¬†—Ä–∞–∑ Exactly once —è–≤–ª—è–µ—Ç—Å—è –ø–æ¬†—Å—É—Ç–∏ –Ω–∞–∏–ª—É—á—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —Å—Ä–µ–¥–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–µ–º–∞–Ω—Ç–∏–∫, —Ç–æ –∫–∞–∫¬†–≤—Å–µ‚Äë—Ç–∞–∫–∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å?  
–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ¬´—Ñ–∏—à–µ—á–µ–∫¬ª, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–º–æ—á—å —Å¬†—ç—Ç–∏–º. –°–ø–µ—Ä–≤–∞ –Ω–∞—á–Ω–µ–º —Å¬†–≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.  
  
**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–æ–¥—é—Å–µ—Ä–∞**

- **acks = -1¬†(all)**¬†‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–¥—é—Å–µ—Ä–∞ –≤¬†–¢–æ–ø–∏–∫–µ –ö–∞—Ñ–∫–∏.
    
- **enable.idempotence = true**¬†‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –≤¬†–æ–ø–µ—Ä–∞—Ü–∏—è—Ö –ø—Ä–æ–¥—é—Å–µ—Ä–∞.¬†–õ–∏–±–æ –ü—Ä–æ–¥—é—Å–µ—Ä –±—É–¥–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω –æ–±¬†—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è,¬†–ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ¬†–±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–æ –≤¬†—Ç–æ–ø–∏–∫ –≤–æ–≤—Å–µ.
    

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –ö–æ–Ω—Å—é–º–µ—Ä–∞**

- **isolation.level = read_commited**¬†‚Äî —Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∞–∑–∫—Ü–∏–∏ –æ—Ç¬†–ø—Ä–æ–¥—é—Å–µ—Ä–∞
    
- **enable.auto.commit = false**¬†‚Äî –ö–æ–Ω—Å—é–º–µ—Ä —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å —Å—á–∏—Ç–∞–Ω–Ω—ã–º
    

–ò –¥–∞–ª–µ–µ –ø—Ä–∏–≤–µ–¥—É –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è exactly once, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∫–æ–ª–ª–µ–≥ –Ω–∞—à–µ–≥–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ü–µ—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ö–∞—Ñ–∫—É –Ω–∞¬†—Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

**Best practice-1**. –ò —Ç–∞–∫, –Ω–∞—á–Ω–µ–º —Å¬†–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö¬†‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –∫–æ–Ω—Å—é–º–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞¬†–ø—Ä–µ–¥–º–µ—Ç –∏—Ö –ø–æ—Ç–≤–æ—Ä–∞: —Å¬†–ø–æ–º–æ—â—å—é traceId –≤¬†–∑–∞–≥–æ–ª–æ–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –¢–∞–∫ –≤¬†—Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–µ–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞ –ö–æ–Ω—Ç—É—Ä, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–±¬†—ç—Ç–æ–º –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤¬†[–¥–æ–∫–ª–∞–¥–µ](https://www.youtube.com/watch?v=V5t_3RxBals&t=2484s)¬†–ì—Ä–∏–≥–æ—Ä–∏—è –ö–æ—à–µ–ª–µ–≤–∞.

**Best practice-2**.¬†–§–∏–∫—Å–∞—Ü–∏—è –æ—Ñ—Ñ—Å–µ—Ç–æ–≤ –≤¬†–æ—Ç–¥–µ–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–Ω–µ—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ñ—Ñ—Å–µ—Ç–æ–≤ —Å¬†–ö–∞—Ñ–∫–∏ –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω—É –∫–æ–Ω—Å—é–º–µ—Ä–∞, —Ç–µ–º —Å–∞–º—ã–º –æ—Å—Ç–∞–≤–∏–≤ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞¬†–≤—ã–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è¬†—Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –ö–æ–Ω—Å—é–º–µ—Ä–∞. –û–±¬†—ç—Ç–æ–π –ø—Ä–∞–∫—Ç–∏–∫–µ –ø—É–±–ª–∏—á–Ω–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∞¬†[–∫–æ–º–∞–Ω–¥–∞](https://www.youtube.com/watch?v=BtmYjTO1EpI&t=1085s)¬†–†–∞–º–±–ª–µ—Ä–∞, –¥–æ–∫–ª–∞–¥ –ê—Ä—Ç–µ–º–∞ –í—ã–±–æ—Ä–Ω–æ–≤–∞.

**Best practice-3.**¬†–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ—Ç¬†–ö–æ–Ω—Å—é–º–µ—Ä–∞ –∫¬†–ü—Ä–æ–¥—é—Å–µ—Ä—É. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å 2¬†—Å–ø–æ—Å–æ–±–∞–º–∏:  
‚Äî¬†–ª–∏–±–æ —Å–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω –æ–±—Ä–∞—Ç–Ω—ã–π —Ç–æ–ø–∏–∫ –ö–∞—Ñ–∫–∞  
‚Äî¬†–ª–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ¬´–ø–∏–Ω–≥ –º–µ—Ç–æ–¥¬ª.  
–°¬†–ø–æ–¥–æ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è –≤—Å—Ç—Ä–µ—á–∞–ª—Å—è –≤¬†–§–∏–Ω–¢–µ—Ö–µ –ø—Ä–∏¬†—Ä–∞–±–æ—Ç–µ —Å¬†—á–∞—Å—Ç—ã–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –ü—Ä–∏¬†—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞ –Ω–∞¬†–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –ü—Ä–æ–¥—é—Å–µ—Ä –∏ –ö–æ–Ω—Å—é–º–µ—Ä –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è—é—Ç—Å—è –º–µ—Å—Ç–∞–º–∏, –≥–¥–µ –Ω–∞—à –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –ö–æ–Ω—Å—é–º–µ—Ä –±—É–¥–µ—Ç —É–≤–µ–¥–æ–º–ª—è—Ç—å –ü—Ä–æ–¥—é—Å–µ—Ä–∞ –æ¬†—Ç–æ–º, —á—Ç–æ¬†—Å–æ–æ–±—â–µ–Ω–∏–µ —Å¬†—Ç–∞–∫–∏–º‚Äë—Ç–æ id'—à–Ω–∏–∫–æ–º —É—Å–ø–µ—à–Ω–æ —Å—á–∏—Ç–∞–Ω–æ. –ê¬†–ø—Ä–∏¬†–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º ¬´–ø–∏–Ω–≥ –º–µ—Ç–æ–¥–µ¬ª –ø–æ¬†—Å–º—ã—Å–ª—É –±—É–¥–µ—Ç –≤—Å–µ —Ä–æ–≤–Ω–æ —Ç–æ–∂–µ —Å–∞–º–æ–µ, —Ç–æ–ª—å–∫–æ —É–∂–µ —Å¬†–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ REST API –≤¬†—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

## ‚Ññ4 –ö–ï–ô–°–´ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø KAFKA

–ü–µ—Ä–µ–π–¥–µ–º –∫¬†–∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–µ–π—Å–∞–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ö–∞—Ñ–∫–∏ –Ω–∞¬†—Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

### –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äì —Å–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤

–°–ø–µ—Ä–≤–∞ —Ä–∞–∑–±–µ—Ä–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ö–∞—Ñ–∫–∏ –≤¬†—Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ü–µ–ø—Ç–∞, –¥–ª—è¬†–∫–æ—Ç–æ—Ä–æ–≥–æ –æ–Ω–∞¬†–±—ã–ª–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤¬†LinkedIn¬†‚Äî –ø–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —è–≤–ª—è—é—â–∏—Ö—Å—è –ª–æ–≥–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤¬†—Å–∏—Å—Ç–µ–º–µ. –ü–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–æ¬†—Ç–æ–ª—å–∫–æ —Å¬†–Ω–µ–±–æ–ª—å—à–∏–º–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ö–∞—Ñ–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä,¬†[BMW](https://habr.com/ru/companies/slurm/articles/670652/).

**–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

- –£¬†–ë–ú–í –µ—Å—Ç—å —Å–∞–π—Ç, –Ω–∞¬†–∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã –≤¬†–≤–∏–¥–µ –∑–∞–ø—á–∞—Å—Ç–µ–π –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤. –û–Ω —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º‚Äë–ø—Ä–æ–¥—é—Å–µ—Ä–æ–º.
    
- –î–ª—è¬†–æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —É¬†–ë–ú–í –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞¬†ELK —Å—Ç—ç–∫–µ.
    
- –î–ª—è¬†–±–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —É¬†–ë–ú–í –µ—Å—Ç—å ML‚Äë—Å–µ—Ä–≤–∏—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫
    
    - NLP‚Äë–º–æ–¥–µ–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è¬†–∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤¬†–ø–æ–¥–¥–µ—Ä–∂–∫—É
        
    - ML‚Äë–º–æ–¥–µ–ª—å –¥–ª—è¬†–∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞. –û–Ω–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞¬†–≤–æ–ø—Ä–æ—Å—ã –æ¬†—Ç–æ–º, –∫–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã —á–∞—â–µ –≤—Å–µ–≥–æ –ø–æ–∫—É–ø–∞—é—Ç –≤–º–µ—Å—Ç–µ? –ß—Ç–æ¬†–º–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–æ–∫—É–ø–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É –≤¬†–º–æ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏? –∏ —Ç–¥.
        

- –õ–æ–≥–∏ —Å¬†–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ¬†–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –≤—ç–±‚Äë—Å–∞–π—Ç –∫–∞–∫¬†—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥—é—Å–µ—Ä –æ—Ç—Å—ã–ª–∞–µ—Ç –≤¬†—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ø–∏–∫–∏ –ö–∞—Ñ–∫–∏, –æ—Ç–∫—É–¥–∞ —É–∂–µ —Ä–∞–Ω–µ–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤¬†—Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
    

–ö–µ–π—Å BMW –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ —Å¬†–Ω–µ–±–æ–ª—å—à–∏–º–∏ –Ω–æ–≤—à–µ—Å—Ç–≤–∞–º–∏ –≤¬†–≤–∏–¥–µ –º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤.  
–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Ñ–∫–∏ –≤¬†–ø–æ–¥–æ–±–Ω–æ–º –∫–µ–π—Å–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤¬†—Ç–æ–º, —á—Ç–æ¬†–æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ¬†–º–æ–¥–µ–ª–∏ pub/sub, —á—Ç–æ¬†–¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–º—É –∏–∑¬†–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—Ç—å –≤¬†—Å–≤–æ–µ–º —Ä–µ–∂–∏–º–µ, –Ω–µ¬†–≤–ª–∏—è—è –Ω–∞¬†–¥—Ä—É–≥–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. Kafka —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞¬†–ø–∞—Ä—Ç–∏—Ü–∏–∏, —á—Ç–æ¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –ø–æ—Ç–æ–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –õ—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –º–æ–∂–µ—Ç –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞¬†–∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é —Ç–æ–ø–∏–∫–∏, –Ω–µ¬†—Å–æ–∑–¥–∞–≤–∞—è –ø—Ä–∏¬†—ç—Ç–æ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ –¥–ª—è¬†–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è‚Äë–ø—Ä–æ–¥—é—Å–µ—Ä–∞.

![–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ BMW](https://habrastorage.org/r/w1560/getpro/habr/upload_files/118/b09/733/118b097330159c6d0ca3519fb9fb1338.png "–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ BMW")

–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –Ω–∞¬†–ø—Ä–æ–µ–∫—Ç–µ BMW

### –ö—Ä–æ—Å—Å-—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ -–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏

–ö–∞—Ñ–∫–∞ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è¬†—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å—Ä–∞–∑—É –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏/—Å–µ—Ä–≤–∏—Å–∞–º–∏. –î–∞–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –ö–∞—Ñ–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞¬†—Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ. –î–æ–ø—É—Å—Ç–∏–º, —É¬†–Ω–∞—Å –µ—Å—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π IT –ª–∞–Ω–¥—à–∞—Ñ—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ 6¬†—Å–∏—Å—Ç–µ–º:

- –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–Ω–∫–∏–Ω–≥
    
- –º–æ–±–∏–ª—å–Ω—ã–π –±–∞–Ω–∫–∏–Ω–≥
    
- —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
    
- —Å–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    
- –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
    
- –°–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
    

–í—Å–µ–º —ç—Ç–∏–º —Å–µ—Ä–≤–∏—Å–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å¬†–¥—Ä—É–≥ –¥—Ä—É–≥–æ–º, –∫¬†–ø—Ä–∏–º–µ—Ä—É:

- –°–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ö–æ—á–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ¬†–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –≤¬†–∏–Ω—Ç–µ—Ä–Ω–µ—Ç‚Äë–±–∞–Ω–∫–µ.
    
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –º–æ–±–∏–ª—å–Ω—ã–π –±–∞–Ω–∫–∏–Ω–≥ —Ö–æ—Ç—è—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞¬†–ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è¬†—Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π.
    
- –°–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ—á–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞¬†—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–ª–∞—Ç–µ–∂–µ–π. –ê¬†–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö–æ—á–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ¬†–≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –æ–ø—ã—Ç–µ –≤¬†—Ä–∞–º–∫–∞—Ö —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
    

–ò –≤¬†–∏—Ç–æ–≥–µ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å–∏—Å—Ç–µ–º—É —Å¬†–∫–∞–∫¬†–º–∏–Ω–∏–º—É–º 4¬†—Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫¬†–ø–∞—É—Ç–∏–Ω–∞.

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –≤—Å–µ —ç—Ç–æ –ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞–µ—Ç –Ω–∞—Å –∫¬†–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö. –ò —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤–∑–≥–ª—è–Ω–µ–º –Ω–∞¬†—Ç–æ, –∫–∞–∫¬†–±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞—à –ª–∞–Ω–¥—à–∞—Ñ—Ç –ø—Ä–∏¬†–≤–Ω–µ–¥—Ä–µ–Ω–∏–∏ –ö–∞—Ñ–∫–∏.

![–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ Kafka](https://habrastorage.org/r/w1560/getpro/habr/upload_files/377/5ca/812/3775ca812879be7f9766db734c297002.png "–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ Kafka")

–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏¬†–ø–æ–º–æ—â–∏ Kafka

- –£¬†–Ω–∞—Å –µ—Å—Ç—å 2¬†–ø—Ä–æ–¥—é—Å–µ—Ä–∞, 3¬†–∫–æ–Ω—Å—é–º–µ—Ä–∞ –∏ —Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ä–∞–∑—É –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏.
    
- –ß–µ—Ä–µ–∑ —Ç–æ–ø–∏–∫ user‚Äëactions: –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–Ω–∫–∏–Ω–≥ –ø—É–±–ª–∏–∫—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ¬†–¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤¬†—Å–∏—Å—Ç–µ–º–µ, –æ—Ç–∫—É–¥–∞ —Å–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ.
    
- –ß–µ—Ä–µ–∑ —Ç–æ–ø–∏–∫ transactions –∫–∞–∂–¥—ã–π –±–∞–Ω–∫–∏–Ω–≥ –ø—É–±–ª–∏–∫—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞¬†–ø–µ—Ä–µ–≤–æ–¥—ã, –∞¬†—Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç—ã–≤–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    
- –ò –Ω–∞–∫–æ–Ω–µ—Ü –≤¬†—Ç–æ–ø–∏–∫ payment status –ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ¬†–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤¬†—Ü–µ–ª—è—Ö —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
    

–í¬†–∏—Ç–æ–≥–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ö–∞—Ñ–∫–∏ –ø–æ–∑–≤–æ–ª–∏–ª–æ –Ω–∞–º –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∑–∞¬†—Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ö–∞—Ñ–∫–∏ –∏–∑¬†–∫–æ—Ä–æ–±–∫–∏.

### –û—Å–Ω–æ–≤–∞ –¥–ª—è —à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö

–¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ¬†–ö–∞—Ñ–∫–∞ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞¬†–¥–æ–ª–∂–Ω–æ—Å—Ç—å —Ç–æ—á–∫–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤¬†—Å–∏—Å—Ç–µ–º–µ, —Ç–æ –º–æ–∂–µ–º —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è –ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ, –∞¬†–∏–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ö–∞—Ñ–∫–∏ –≤¬†–∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤—ã –¥–ª—è¬†—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —à–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö.

–ö–∞–∫¬†—Ä–∞–∑ –ø–æ–¥–æ–±–Ω–æ–µ¬†–±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π¬†[OzonTech](https://habr.com/ru/companies/ozontech/articles/749328/).  
–†–µ—à–µ–Ω–∏–µ –æ—Ç¬†Ozon –æ–±–ª–∞–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏:

- –í¬†–æ–±—â–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ –±–æ–ª–µ–µ 3500¬†–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –≤—Å–µ–º –∏–º –Ω—É–∂–Ω–æ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π –¥–∞–Ω–Ω—ã–º–∏.
    
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–µ—Ä–≤–æ–º—É –∫–µ–π—Å—É —É¬†–Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ª–µ–∂–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤¬†—Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    
- –í¬†—Ü–µ–Ω—Ç—Ä–µ –≤—Å–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è —Å—Ç–æ–∏—Ç –ö–∞—Ñ–∫–∞.
    
- –ù–æ¬†–ø–æ–≤–µ—Ä—Ö –ö–∞—Ñ–∫–∏ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –Ω–∞¬†Golang, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ¬†gRPC.
    
    - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º –Ω–µ¬†—Ç–æ–ª—å–∫–æ –¥–ª—è ¬´–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è¬ª —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ –ö–∞—Ñ–∫–æ–π, –Ω–æ¬†–∏ –¥–ª—è¬†–ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
        
    - –¢–∞–∫–∂–µ –±–ª–∞–≥–æ–¥–∞—Ä—è gRPC streaming –®–∏–Ω–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å¬†–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏, –∫–æ—Ç–æ—Ä–æ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É –æ–±—â–µ–Ω–∏—è pub/sub.
        

–í¬†–∏—Ç–æ–≥–µ –ø–æ–¥–æ–±–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏:

- 2,5¬†–≥–±/ –≤¬†—Å–µ–∫ –Ω–∞¬†–∑–∞–ø–∏—Å—å –∏ 7¬†–≥–±/—Å–µ–∫ –Ω–∞¬†—á—Ç–µ–Ω–∏–µ
    
- –†–µ–π—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: 1,5¬†–º–ª–Ω rps –Ω–∞¬†–∑–∞–ø–∏—Å—å –∏ 2¬†–º–ª–Ω rps –Ω–∞¬†—á—Ç–µ–Ω–∏–µ
    
- –ò–Ω—Å—Ç–∞–Ω—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: 50–∫ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ 16–∫ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤
    

–í–æ—Ç —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–æ‚Äë–Ω–∞—Å—Ç–æ—è—â–µ–º—É –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ç–æ, —á—Ç–æ¬†–∑–Ω–∞—á–∏—Ç –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ¬†–ö–∞—Ñ–∫–µ.

![–®–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö Ozon –Ω–∞ –±–∞–∑–µ Kafka](https://habrastorage.org/r/w1560/getpro/habr/upload_files/bad/031/bf3/bad031bf351003c92bf8abab18c2f3eb.png "–®–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö Ozon –Ω–∞ –±–∞–∑–µ Kafka")

–®–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö Ozon –Ω–∞¬†–±–∞–∑–µ Kafka

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏

–¢–∞–∫–∂–µ –ö–∞—Ñ–∫—É —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è¬†—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤¬†—Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –¥–ª—è¬†–∫–æ—Ç–æ—Ä–æ–≥–æ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞, –∏ –º–∞—Å—Ç–µ—Ä‚Äë—Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–≤–æ–¥–∏—Ç —Å–ª–æ–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤¬†–ë–î –∏ —Ö–æ–¥–∏—Ç –ø–æ–ø—É—Ç–Ω–æ –≤¬†–¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ–±—ã –æ—Ç–¥–∞—Ç—å –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –ò –ø–æ—Å–∫–æ–ª—å–∫—É —É¬†–Ω–∞—Å –ø–æ–¥¬†–∫–∞–ø–æ—Ç–æ–º –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ª–µ–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ—Å–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ç–æ callback –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–µ¬†—Å–∫–æ—Ä–æ, –∞¬†–≤¬†—Ä–∞–º–∫–∞—Ö —Ä–∞–±–æ—Ç—ã —Å¬†–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –¥–æ–ø—É—Å—Ç–∏–º, –µ—Å—Ç—å –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –Ω–∞¬†–ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ API.

![–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á1)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b7e/bec/2dc/b7ebec2dce2e3eec9c72bcb2dc2ff513.png "–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á1)")

–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è¬†–∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á1)

–ü–æ—ç—Ç–æ–º—É —á—Ç–æ–±—ã –Ω–µ¬†–æ–±—Ä–µ–º–µ–Ω—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–∂–∏–¥–∞–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ ¬´–≤–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞¬†—ç–∫—Ä–∞–Ω–µ¬ª, –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–∞¬†—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤¬†–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. –ü—Ä–∏¬†–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ö–∞—Ñ–∫–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞¬†—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ—Ç¬†–∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫¬†–º–∞—Å—Ç–µ—Ä‚Äë—Å–∏—Å—Ç–µ–º–µ –≤—Å–µ —Ç–∞–∫–∂–µ –æ—Å—Ç–∞–ª—Å—è, –Ω–æ¬†—Ç–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∂–¥–∞—Ç—å –µ–≥–æ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º—ã —Å—Ä–∞–∑—É –æ—Ç–≤–µ—á–∞–µ–º –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –æ¬†—Ç–æ–º, —á—Ç–æ¬†–≤–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞¬†–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏–Ω—è—Ç–∞, –æ–∂–∏–¥–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –≤¬†–ö–∞—Ñ–∫–µ. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º—ã –Ω–∞¬†—Å—Ç–æ—Ä–æ–Ω–µ –º–∞—Å—Ç–µ—Ä‚Äë—Å–∏—Å—Ç–µ–º—ã, –Ω–µ¬†–±–µ—Å–ø–æ–∫–æ—è—Å—å –æ¬†–≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–æ–≤–æ–¥–∏–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–ª—è¬†–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –∫–ª–∞–¥–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤¬†–ö–∞—Ñ–∫—É —Å¬†—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–∞–ø–∏—Å–∏. –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—É—à–∞–º–∏ –æ–±¬†–∏—Ç–æ–≥–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.

![–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á2)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/050/2b4/eb2/0502b4eb20796a975dc5329c719b90a0.png "–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á2)")

–ö–µ–π—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ö–∞—Ñ–∫–∏ –¥–ª—è¬†–∞—Å–∏–Ω—Ö—Ä–æ–Ω–∞ (—á2)

### –ö–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å Kafka

–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –±—É–¥–µ—Ç —É–ø–æ–º—è–Ω—É—Ç—å –æ¬†—Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –ö–∞—Ñ–∫—É –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–µ¬†—Å—Ç–æ–∏—Ç. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞¬†–≤—Å–µ –¥–∏—Ñ–∏—Ä–∞–º–±—ã –≤¬†—Å—Ç–æ—Ä–æ–Ω—É –¥–∞–Ω–Ω–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –ö–∞—Ñ–∫–∞ —ç—Ç–æ –¥–∞–ª–µ–∫–æ –Ω–µ¬†–ø–∞–Ω–∞—Ü–µ—è –∏ –µ—Å—Ç—å –∫–µ–π—Å—ã, –≥–¥–µ –µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ, –º—è–≥–∫–æ –≥–æ–≤–æ—Ä—è –Ω–µ¬†—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫¬†–¥–ª—è¬†—ç—Ç–æ–≥–æ –µ—Å—Ç—å –±–æ–ª–µ–µ —É–¥–∞—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

  
**–ù–µ¬†–Ω–∞–¥–æ ‚Ññ¬†1**. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ —Å¬†–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏. –ö–∞—Ñ–∫–∞ –ø–æ–¥¬†–æ—á–µ—Ä–µ–¥–∏ —Å¬†–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –Ω–µ¬†–∑–∞—Ç–æ—á–µ–Ω–∞, –≤¬†–Ω–µ–π –∏–∑¬†–∫–æ—Ä–æ–±–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ FIFO. –ü–æ—ç—Ç–æ–º—É –¥–ª—è¬†—Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω–æ–π –∑–∞–¥–∞—á–∏ –ª—É—á—à–µ –ø–æ–¥–æ–π–¥–µ—Ç Rabbit, –ø–æ—Å–∫–æ–ª—å–∫—É –≤¬†–Ω–µ–º –¥–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏–º–µ–µ—Ç—Å—è –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ.

  
**–ù–µ¬†–Ω–∞–¥–æ ‚Ññ¬†2**. –í—Ç–æ—Ä–æ–π –∫–µ–π—Å —ç—Ç–æ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—á–µ—Ä–µ–¥–∏ –≤¬†—Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ë–µ–∑—É—Å–ª–æ–≤–Ω–æ –æ–¥–Ω–æ –∏ —Ç–æ¬†–∂–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã—Å—Ç—É–ø–∞—Ç—å –¥–ª—è¬†—Å–µ–±—è –∫–æ–Ω—Å—é–º–µ—Ä–æ–º –∏ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º. –ù–æ¬†–ø—Ä–∏—á–∏–Ω—ã, –ø–æ¬†–∫–æ—Ç–æ—Ä–æ–º —Ç–∞–∫ –ª—É—á—à–µ –Ω–µ¬†–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ:

1. –ö–∞—Ñ–∫–∞¬†–±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è¬†–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏–º–µ–Ω–Ω–æ 2¬†—Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π/—Å–∏—Å—Ç–µ–º.
    
2. –ò –≤—Ç–æ—Ä–æ–µ —ç—Ç–æ –±—É–¥–µ—Ç –∏–∑–ª–∏—à–Ω–µ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –∑–∞¬†—Å—á–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π. –ê¬†–ø–æ–¥–æ–±–Ω—ã–π –æ–≤–µ—Ä–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –ø–æ—Ç–æ–º –º–æ–∂–µ—Ç –æ–±–µ—Ä–Ω—É—Ç—å—Å—è —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –≤¬†–ø–æ–¥–¥–µ—Ä–∂–∫–µ —Ä–µ—à–µ–Ω–∏—è.  
    –ü–æ—ç—Ç–æ–º—É –ø–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ¬†—è¬†–±—ã —Ç—É—Ç –¥–æ–±–∞–≤–∏–ª, —Ç–∞–∫ —ç—Ç–æ: ¬´–µ_—Å–ª–∏ —É¬†–≤–∞—Å –µ—Å—Ç—å —Å–∞–º–æ–ª–µ—Ç, —Ç–æ –Ω–∞¬†–Ω–µ–º –Ω—É–∂–Ω–æ –ª–µ—Ç–∞—Ç—å –≤¬†–Ω–µ–±–µ, –∞¬†–Ω–µ¬†–∫–∞—Ç–∞—Ç—å—Å—è –ø–æ¬†—à–æ—Å—Å–µ. –í–µ–¥—å –¥–ª—è¬†–ø—Ä–æ–µ–∑–∂–µ–π —á–∞—Å—Ç–∏ –ª—É—á—à–µ –ø–æ–¥–æ–π–¥—É—Ç –ø—Ä–∏–≤—ã—á–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏_¬ª¬†‚Äî –¥—É–º–∞—é, –∞–ª–ª–µ–≥–æ—Ä–∏—è –≤–ø–æ–ª–Ω–µ –ø–æ–Ω—è—Ç–Ω–∞—è


# **Retry and Dead Letter Queue in Kafka**
[[üíç Kafka]]  [[üåì patterns]]

https://medium.com/@turkishtechnology/retry-and-dead-letter-queue-in-kafka-28335b43c832

**`Retry Topic`**

Instead of waiting for retries to complete, we can consider the message processed and send it to a newly created `Retry Topic`. This allows the consumer to continue processing other messages while the `Retry Topic` handles the retries.

**`Dead Letter Queue`**

A Dead Letter Queue (DLQ) in Kafka is essentially a topic dedicated to storing messages that have failed processing despite multiple retries. These messages can then be handled according to specific needs.

For instance, we can have a `Consumer` project that listens to the DLQ, logs the failed messages, and sets up alerts in `ElasticSearch`, or stores them in a database for reference. This approach helps to minimize data loss by retaining information about failed events. Let‚Äôs illustrate this workflow.

# ETL

–ö–æ–Ω–≤–µ–π–µ—Ä ETL (Extract, Transform, and Load) ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏—Ö –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ü–µ–ª–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É. –í –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–¥–Ω–æ–π –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏–º—ã—Ö —Ç–µ–Ω–¥–µ–Ω—Ü–∏–π —Å—Ç–∞–ª –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–≤–µ–π–µ—Ä—É ETL –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Ä–µ –∏—Ö –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è.

# –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π Kafka –≤ —É—Å–ª–æ–≤–∏—è—Ö –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
https://www.youtube.com/watch?v=BtmYjTO1EpI